#!/usr/bin/env bash
# Configures an Ubuntu server as follows:
#   - localhost resolves to 127.0.0.2
#   - facebook.com resolves to 8.8.8.8

# Define the target hosts file
target_hosts_file="/etc/hosts"

# Create a temporary hosts file
temp_hosts_file="$(mktemp)"

# Define the new host entries
new_hosts_entries="
127.0.0.2	localhost
8.8.8.8		facebook.com
"

# Copy the original hosts file to the temporary location
cp "$target_hosts_file" "$temp_hosts_file"

# Append the new host entries to the temporary hosts file using a single 'cat' command
echo "$new_hosts_entries" >> "$temp_hosts_file"

# Replace the original hosts file with the modified temporary hosts file
mv "$temp_hosts_file" "$target_hosts_file"

# Cleanup temporary file (optional)
# rm "$temp_hosts_file"
