#!/usr/bin/env bash
# Configure Nginx to add custom HTTP response header

# Update package index
sudo apt-get update

# Install Nginx if not already installed
sudo apt-get install -y nginx

# Get the hostname of the server
HOSTNAME=$(hostname)

# Define custom header configuration for Nginx
HEADER_CONFIG="add_header X-Served-By $HOSTNAME;"

# Update Nginx default configuration file to include the custom header
sudo sed -i "/^http {/ a \\\t$HEADER_CONFIG" /etc/nginx/nginx.conf

# Restart Nginx to apply changes
sudo systemctl restart nginx

echo "Nginx configured successfully with custom HTTP response header"
